(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,t,a){e.exports=a(419)},181:function(e,t,a){},183:function(e,t,a){},419:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(421),l=a(29),i=a.n(l),o=(a(181),a(13)),c=a(14),m=a(16),u=a(15),h=a(17),d=a(423),g=a(422),p=(a(183),a(420)),f=a(52),E=a.n(f),v=a(25),b=a(20),w=a(158),y=a.n(w),N=a(10),C=a.n(N),k=a(78),S=a.n(k),O=a(150),j=a.n(O),T=a(36),x=a.n(T),L=a(151),M=a.n(L),I=a(153),_=a.n(I),A=a(154),R=a.n(A),D=a(155),P=a.n(D),U=a(156),W=a.n(U),F=a(33),z=a.n(F),V=a(152),q=a.n(V),B=a(157),J=a.n(B),G=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={left:!1,open:!1,role:""},a.fetchUserRole=function(){fetch("//localhost:5000/users/me",{headers:{"x-auth":sessionStorage.token}}).then(function(e){return 200===e.status?e.json():new Error("Invalid Token")}).then(function(e){a.setState({role:e.user.role})}).catch(function(e){return console.log(e)})},a.toggleDrawer=function(e,t){a.setState(Object(v.a)({},e,t))},a.handleClick=function(){a.setState(function(e){return{open:!e.open}})},a.navClicked=function(e,t){return function(){a.toggleDrawer(e,t)}},a.navItemClicked=function(e,t){return function(){a.toggleDrawer(e,t),a.handleClick()}},a.topItemClicked=function(e,t){return function(){a.toggleDrawer(e,t)}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchUserRole()}},{key:"render",value:function(){var e=this.props.classes,t=s.a.createElement("div",{className:e.list},s.a.createElement(S.a,{component:"nav",subheader:s.a.createElement(j.a,{component:"div"},"All Routes"),className:"".concat(e.root," nav-root")},s.a.createElement(x.a,{button:!0,className:"nav-item"},s.a.createElement(p.a,{to:"/",onClick:this.topItemClicked("left",!1)},"Home")),s.a.createElement(x.a,{button:!0,className:"nav-item"},s.a.createElement(p.a,{to:"/profile",onClick:this.topItemClicked("left",!1)},"Profile")),s.a.createElement(x.a,{button:!0,className:"nav-item"},s.a.createElement(p.a,{to:"/",onClick:this.topItemClicked("left",!1)},"All Lists")),s.a.createElement(x.a,{button:!0,className:"nav-item"},s.a.createElement(p.a,{to:"/add-list",onClick:this.topItemClicked("left",!1)},"Add List")),s.a.createElement(z.a,null),"admin"===this.state.role?s.a.createElement(s.a.Fragment,null,s.a.createElement(x.a,{button:!0,onClick:this.handleClick},s.a.createElement(M.a,null,s.a.createElement(q.a,null)),s.a.createElement(_.a,{primary:"User Actions"}),this.state.open?s.a.createElement(R.a,null):s.a.createElement(P.a,null)),s.a.createElement(W.a,{in:this.state.open,timeout:"auto",unmountOnExit:!0},s.a.createElement(S.a,{component:"div",disablePadding:!0},s.a.createElement(x.a,{button:!0,className:"".concat(e.nested," nav-item")},s.a.createElement(p.a,{to:"/users",onClick:this.navItemClicked("left",!1)},"All Users")),s.a.createElement(x.a,{button:!0,className:"".concat(e.nested," nav-item")},s.a.createElement(p.a,{to:"/users/add",onClick:this.navItemClicked("left",!1)},"Add User"))))):null,s.a.createElement(x.a,{className:"nav-item"},s.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:this.props.signOut,className:"signout-btn"},"logout"))));return s.a.createElement("div",null,s.a.createElement(C.a,{onClick:this.navClicked("left",!0)},s.a.createElement("div",{className:"nav-title-container"},s.a.createElement(J.a,null)," ",s.a.createElement("h3",{className:"nav-title"},"Menu"))),s.a.createElement(y.a,{className:"popout-nav",open:this.state.left,onClose:this.navClicked("left",!1)},s.a.createElement("div",{tabIndex:0,role:"button"},t)))}}]),t}(n.Component),H=Object(b.withStyles)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:4*e.spacing.unit},list:{width:250},fullList:{width:"auto"},hr:{height:5,marginTop:10,marginBottom:10}}})(G),K=a(159),Y=a.n(K),X=a(160),$=a.n(X),Q=a(24),Z=a.n(Q),ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={btnText:"Login"},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.loggedIn?this.setState({btnText:"Logout"}):this.setState({btnText:"Login"})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.btnText;return s.a.createElement(Y.a,{position:"static",className:"header"},s.a.createElement($.a,null,s.a.createElement(Z.a,{variant:"h6",color:"inherit",className:e.grow},s.a.createElement("img",{src:E.a,className:"logo",alt:"logo"}),s.a.createElement("span",{className:"header-title"},"Minerva Organization Lists")),s.a.createElement(p.a,{to:"/profile",className:"profile-btn"},s.a.createElement("i",{className:"fas fa-user user-icon"})),s.a.createElement(C.a,{variant:"contained",className:"btn",onClick:this.props.signOut},t)),s.a.createElement("nav",{className:"nav"},s.a.createElement(H,{signOut:this.props.signOut})))}}]),t}(n.Component),te=Object(b.withStyles)({root:{flexGrow:1},grow:{flexGrow:1,display:"flex","align-items":"center"},menuButton:{marginLeft:-12,marginRight:20}})(ee),ae=a(26),ne=a.n(ae),se=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=(new Date).getFullYear();return s.a.createElement("footer",{className:"footer"},s.a.createElement("div",{className:"".concat(e.root," large-wrapper")},s.a.createElement(ne.a,{container:!0,spacing:24,className:"grid-container"},s.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4},s.a.createElement("img",{className:"footer-logo",src:E.a,alt:"logo"})),s.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4},s.a.createElement("p",null,"Checklist Organization Application")),s.a.createElement(ne.a,{item:!0,xs:12,sm:12,md:4},s.a.createElement("p",null,"Copyright \xa9 ",t,"."," ",s.a.createElement("a",{href:"https://minervawebdevelopment.com"},"Minerva Web Development"))))))}}]),t}(n.Component),re=Object(b.withStyles)({root:{flexGrow:1}})(se),le=a(30),ie=a.n(le),oe=a(34),ce=a.n(oe),me=a(175),ue=a(6),he=a.n(ue),de=a(161),ge=a.n(de),pe=a(163),fe=a.n(pe),Ee=a(164),ve=a.n(Ee),be=a(167),we=a.n(be),ye=a(165),Ne=a.n(ye),Ce=a(79),ke=a.n(Ce),Se=a(80),Oe=a.n(Se),je=a(166),Te=a.n(je),xe=a(162),Le=a.n(xe),Me={success:ge.a,warning:Le.a,error:fe.a,info:ve.a},Ie=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.className,n=e.message,r=e.onClose,l=e.variant,i=e.target,o=Object(me.a)(e,["classes","className","message","onClose","variant","target"]),c=Me[l];return s.a.createElement(Te.a,Object.assign({className:he()(t[l],a),"aria-describedby":"client-snackbar",message:s.a.createElement("span",{id:"client-snackbar",className:t.message},s.a.createElement(c,{className:he()(t.icon,t.iconVariant)}),n," ",i?s.a.createElement(p.a,{className:"view-list-btn",to:"/list?id=".concat(i)},"View List"):null),action:[s.a.createElement(Oe.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:r},s.a.createElement(we.a,{className:t.icon}))]},o))}}]),t}(n.Component),_e=Object(b.withStyles)(function(e){return{success:{backgroundColor:Ne.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:ke.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(Ie),Ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:"",warning:!1,warningMsg:""},a.handleChange=function(e){var t;if(13===e.which)return a.submitLogin();a.setState((t={},Object(v.a)(t,e.target.name,e.target.value),Object(v.a)(t,"warning",!1),t))},a.closeModal=function(){return a.setState({warning:!1})},a.submitLogin=function(){var e=a.state,t=e.email,n=e.password;if(!t||!n)return a.setState({warning:!0,warningMsg:"Both email and password are required."});a.props.signIn(t,n)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.resMsg&&this.setState({warningMsg:this.props.resMsg,warning:!0})}},{key:"componentWillReceiveProps",value:function(e){""!==e.resMsg&&this.setState({warningMsg:e.resMsg,warning:!0})}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("main",{className:"main login-landing"},s.a.createElement("form",{className:"form"},s.a.createElement("img",{className:"logo",src:E.a,alt:"logo"}),s.a.createElement("h3",{className:"form-title"},"Log in"),this.state.warning?s.a.createElement(_e,{variant:"warning",className:e.margin,message:this.state.warningMsg,onClick:this.closeModal}):null,s.a.createElement(ie.a,{className:"".concat(e.margin," ").concat(e.MuiFormLabel," input-txt-container"),id:"email",label:"Email",placeholder:"Email",name:"email",InputProps:{startAdornment:s.a.createElement(ce.a,{position:"start"},s.a.createElement("i",{className:"fas fa-user icon"})),className:e.label},autoFocus:!0,required:!0,autoComplete:"off",onChange:this.handleChange,value:this.state.un}),s.a.createElement(ie.a,{className:"".concat(e.margin," input-txt-container"),id:"password",label:"Password",placeholder:"Password",name:"password",type:"password",InputProps:{startAdornment:s.a.createElement(ce.a,{position:"start"},s.a.createElement("i",{className:"fas fa-lock icon"}))},required:!0,onChange:this.handleChange,onKeyPress:this.handleChange,value:this.state.pw}),s.a.createElement(C.a,{variant:"contained",color:"primary",className:"".concat(e.button," btn"),onClick:this.submitLogin},"Sign In")))}}]),t}(n.Component),Re=Object(b.withStyles)(function(e){return{margin:{margin:e.spacing.unit},button:{margin:e.spacing.unit},warning:{backgroundColor:ke.a[700]}}})(Ae),De=a(53),Pe=a.n(De),Ue=a(54),We=a.n(Ue),Fe=a(168),ze=a.n(Fe),Ve=a(56),qe=a.n(Ve),Be=a(55),Je=a.n(Be),Ge=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={all_lists:[],todo_list:[],launch_list:[],live_list:[],ecom_list:[],ecom_live_list:[],listsAcquired:!1,listType:""},a.getLists=function(){fetch("//localhost:5000/lists",{headers:{"x-auth":sessionStorage.token}}).then(function(e){return 200===e.status?e.json():new Error("Could not authenticate and acquire lists.")}).then(function(e){e.lists.map(function(e,t){var n=a.state[e.type];return n.push(e),n.length>=5&&(n=n.slice(0,5)),a.setState(Object(v.a)({},e.type,n))});var t=[{title:"Todo Lists",array:a.state.todo_list,type:"todo_list",img:"https://s3.amazonaws.com/minervalists/todo-list.jpg"},{title:"Launch Lists",array:a.state.launch_list,type:"launch_list",img:"https://s3.amazonaws.com/minervalists/launch-list.png"},{title:"Live Lists",array:a.state.live_list,type:"live_list",img:"https://s3.amazonaws.com/minervalists/live-list.png"},{title:"Ecommerce Lists",array:a.state.ecom_list,type:"ecom_list",img:"https://s3.amazonaws.com/minervalists/ecom-list.png"},{title:"Ecommerce Live Lists",array:a.state.ecom_live_list,type:"ecom_live_list",img:"https://s3.amazonaws.com/minervalists/ecom-live-list.jpg"}];a.setState({listsAcquired:!0,all_lists:t})}).catch(function(e){return console.error(e)})},a.countCompleted=function(e){var t=0;return e.map(function(e){return!!e.completed&&t++}),t},a.handleMO=function(e){return a.props.updateListType(e)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getLists()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.listsAcquired,r=a.all_lists,l=n?r.map(function(a,n){return s.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,key:"list-".concat(a.title,"-").concat(n)},s.a.createElement(Pe.a,{className:t.card},s.a.createElement(We.a,null,s.a.createElement(Je.a,{className:t.media,image:a.img,title:"List"}),s.a.createElement(qe.a,null,s.a.createElement(Z.a,{gutterBottom:!0,variant:"h5",component:"h2"},a.title),s.a.createElement(Z.a,{component:"div"},s.a.createElement("p",null,"# of ",a.title,": ",a.array.length),s.a.createElement("p",null,"Completed: ",e.countCompleted(a.array))))),s.a.createElement(ze.a,null,s.a.createElement(C.a,{className:"btn-container",variant:"outlined",size:"small",color:"primary"},s.a.createElement(p.a,{to:"/lists/".concat(a.type,"s"),onMouseOver:function(){return e.handleMO(a.type)},className:"btn"},"View All")),s.a.createElement(C.a,{className:"btn-container",variant:"outlined",size:"small",color:"primary"},s.a.createElement(p.a,{to:"/add-list",className:"btn"},"Create More")))))}):s.a.createElement("div",{className:"spinner"});return s.a.createElement("article",{className:"home-article"},s.a.createElement("h1",{className:"article-title"},"Home"),s.a.createElement("section",{className:"section-container large-wrapper"},s.a.createElement("h2",null,"All Lists"),s.a.createElement(z.a,null),s.a.createElement(ne.a,{container:!0,spacing:24,className:"grid-container"},l)))}}]),t}(n.Component),He=Object(b.withStyles)({card:{maxWidth:345,margin:"auto",height:"100%"},media:{height:140}})(Ge),Ke=a(63),Ye=a.n(Ke),Xe=a(64),$e=a.n(Xe),Qe=a(41),Ze=a.n(Qe),et=a(65),tt=a.n(et),at=a(35),nt=a.n(at),st=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={listType:"",listName:"",website:"",labelWidth:0,listID:null,success:!1,successMsg:"",warning:!1,warningMsg:"",failure:!1},a.closeModal=function(){return a.setState({warning:!1,success:!1,failure:!1})},a.handleChange=function(e){var t;a.setState((t={},Object(v.a)(t,e.target.name,e.target.value),Object(v.a)(t,"warning",!1),Object(v.a)(t,"success",!1),Object(v.a)(t,"failure",!1),t),function(){sessionStorage.listType=a.state.listType,a.props.updateListType(a.state.listType)})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.listType,s=t.listName;if(!n||!s)return a.setState({warning:!0,warningMsg:"Name of website and list type are required."});fetch("//localhost:5000/lists",{method:"POST",headers:{"x-auth":sessionStorage.token,"Content-Type":"application/json"},body:JSON.stringify({type:n,listName:s})}).then(function(e){if(200===e.status)return e.json();throw a.setState({warning:!0,failure:!0,warningMsg:"List name must be unique."}),Error("Duplicate key")}).then(function(e){a.setState({success:!0,successMsg:"List created successfully!",listID:e._id,listName:"",listType:""})}).catch(function(e){return console.error(e)})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({labelWidth:i.a.findDOMNode(this.InputLabelRef).offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement("article",{className:"add-list-article"},s.a.createElement("h1",{className:"article-title"},"Generate new list"),s.a.createElement("section",{className:"section-container add-list large-wrapper"},s.a.createElement("form",{className:"add-list-form",action:""},this.state.warning?s.a.createElement(_e,{variant:this.state.failure?"error":"warning",className:t.margin,message:this.state.warningMsg,onClick:this.closeModal}):this.state.success?s.a.createElement(_e,{variant:"success",className:"".concat(t.margin," success-msg"),message:this.state.successMsg,target:this.state.listID,onClick:this.closeModal}):null,s.a.createElement(ne.a,{container:!0,spacing:24,className:"form-grid"},s.a.createElement(ne.a,{className:"grid-left",item:!0,xs:12,md:6,lg:5},s.a.createElement("h2",{className:"add-list-subtitle"},"select the type of list:"),s.a.createElement(Ze.a,{variant:"outlined",className:t.formControl},s.a.createElement($e.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"outlined-label"},"List Type"),s.a.createElement(tt.a,{value:this.state.listType,onChange:this.handleChange,input:s.a.createElement(Ye.a,{labelWidth:this.state.labelWidth,name:"listType",id:"outlined-label"})},s.a.createElement(nt.a,{value:""},s.a.createElement("em",null,"None")),s.a.createElement(nt.a,{value:"todo_list"},"Todo List"),s.a.createElement(nt.a,{value:"launch_list"},"Launch List"),s.a.createElement(nt.a,{value:"live_list"},"Live List"),s.a.createElement(nt.a,{value:"ecom_list"},"Ecommerce List"),s.a.createElement(nt.a,{value:"ecom_live_list"},"Ecommerce Live List"))),s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",{className:"add-list-subtitle"},"todo_list"===this.state.listType?"List Name: ":"Website Name: ",this.state.listName),s.a.createElement(ie.a,{label:"List Name",name:"listName",className:"".concat(t.textField," input-txt-container"),value:this.state.listName,onChange:this.handleChange,placeholder:"List Name",margin:"normal"}))),s.a.createElement(ne.a,{className:"grid-right",item:!0,xs:12,md:6,lg:5},s.a.createElement("h2",{className:"add-list-subtitle"},"submit new list"),s.a.createElement(C.a,{variant:"outlined",color:"primary",onClick:this.handleSubmit},"Create List")))))))}}]),t}(n.Component),rt=Object(b.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:"10px auto","text-transform":"capitalize"},formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit}}})(st),lt=a(81),it=a.n(lt),ot=a(83),ct=a.n(ot),mt=a(12),ut=a.n(mt),ht=a(82),dt=a.n(ht),gt=a(57),pt=a.n(gt),ft=a(39),Et=a.n(ft),vt=a(51),bt=a.n(vt),wt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={listType:a.props.listType?a.props.listType:sessionStorage.listType,lists:[],receivedLists:!1,searchResults:[],defaultLists:[],listToRemove:null,removedList:{},lastWarning:!1,open:!1},a.fetchLists=function(){var e=a.state.listType;fetch("//localhost:5000/lists/".concat(e),{headers:{"x-auth":sessionStorage.token}}).then(function(e){return 200===e.status?e.json():new Error("Could not authenticate and acquire lists.")}).then(function(e){a.setState({lists:e.lists,receivedLists:!0,searchResults:e.lists,defaultLists:e.lists})}).catch(function(e){return console.error(e)})},a.handleClose=function(){return a.setState({open:!1})},a.prettifyName=function(){var e=a.state.listType,t=e.split("_");return"ecom_live_list"===e?(t="".concat(t[0]," ").concat(t[1]," ").concat(t[2]),"".concat(t,"s")):(t="".concat(t[0]," ").concat(t[1]),"".concat(t,"s"))},a.handleSearch=function(e){var t=e.target.value,n=a.state.lists,s=new RegExp(t,"i"),r=[];n.map(function(e){return e.listName.match(s)&&t?(r.push(e),a.setState({searchResults:r,noMatch:!1})):0===r.length&&t?a.setState({searchResults:a.state.defaultLists,noMatch:!0,msg:"No results for ".concat(t)}):!t&&a.setState({noMatch:!1,searchResults:a.state.defaultLists})})},a.askToDelete=function(e){return a.setState({listToRemove:e,open:!0})},a.deleteList=function(){var e=a.state.listToRemove;fetch("//localhost:5000/lists/".concat(e),{method:"delete",headers:{"x-auth":sessionStorage.token}}).then(function(e){return 200===e.status?e.json():new Error("Could not remove list.")}).then(function(e){a.setState({removedList:e,open:!1,lastWarning:!0}),a.fetchLists()})},a.dismissRestore=function(){return a.setState({lastWarning:!1})},a.restoreList=function(){var e=a.state,t=e.removedList,n=e.listType;fetch("//localhost:5000/lists",{method:"POST",headers:{"Content-Type":"application/json","x-auth":sessionStorage.token},body:JSON.stringify({type:n,listName:t.listName,items:t.items})}).then(function(e){return 200===e.status?e.json():new Error("Could not re-add removed list.")}).then(function(e){var t=a.state.lists;t.push(e),a.setState({lists:t,searchResults:t,defaultLists:t,lastWarning:!1})})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchLists()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.listType,r=a.receivedLists?this.state.searchResults.map(function(t){return s.a.createElement(pt.a,{key:t._id},s.a.createElement(ut.a,{component:"th",scope:"row"},t.listName),s.a.createElement(ut.a,null,t.type),s.a.createElement(ut.a,null,t.items.length),s.a.createElement(ut.a,null,t.completed?"Complete":"Incomplete"),s.a.createElement(ut.a,null,t.createdAt?"".concat(new Date(t.createdAt).getMonth()+1,"/").concat(new Date(t.createdAt).getDate(),"/").concat(new Date(t.createdAt).getFullYear()):"No date found."," "),s.a.createElement(ut.a,null,s.a.createElement(C.a,{variant:"contained",color:"primary",className:"link-container"},s.a.createElement(p.a,{to:"/list?id=".concat(t._id),className:"btn"},"View"))),s.a.createElement(ut.a,null,s.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:function(){return e.askToDelete(t._id)}},"Delete")))}):null,l=s.a.createElement("div",{className:"search-bar-container"},s.a.createElement("input",{id:"search",placeholder:"Search...",type:"search",onChange:this.handleSearch,autoComplete:"off"}),s.a.createElement(p.a,{to:"/",className:"return-btn"},s.a.createElement("i",{className:"fas fa-caret-left"}),"Return to all lists"),this.state.noMatch?s.a.createElement("div",{className:"warning"},s.a.createElement(_e,{variant:"warning",className:t.margin,message:this.state.msg})):null),i=s.a.createElement(bt.a,{"aria-labelledby":"delete-modal-title","aria-describedby":"delete-modal-description",open:this.state.open,onClose:this.handleClose},s.a.createElement("div",{className:t.paper},s.a.createElement(Z.a,{variant:"h6",id:"modal-title"},"Are you sure you want to remove this list?"),s.a.createElement(Z.a,{variant:"subtitle1",id:"simple-modal-description"},"This action can be undone, but it is illadvised to constantly remove and re-add lists."),s.a.createElement("div",{className:"btn-container"},s.a.createElement(C.a,{color:"secondary",variant:"contained",onClick:this.deleteList},"Remove The List"),s.a.createElement(C.a,{color:"primary",variant:"contained",onClick:this.handleClose},"Keep The List")))),o=s.a.createElement(s.a.Fragment,null,s.a.createElement(C.a,{variant:"outlined",color:"primary",onClick:this.restoreList},"restore list?"),s.a.createElement(C.a,{onClick:this.dismissRestore,variant:"outlined",color:"secondary"},"No, I meant to delete it."));return s.a.createElement("div",{className:"all-lists-type"},s.a.createElement("h1",{className:"article-title"},"All ",this.prettifyName(n)),l,s.a.createElement("article",{className:"list-table ".concat(n)},s.a.createElement("section",{className:"section-container"},i,this.state.lastWarning?o:null,s.a.createElement(Et.a,{className:t.root},s.a.createElement(it.a,{className:t.table},s.a.createElement(dt.a,null,s.a.createElement(pt.a,null,s.a.createElement(ut.a,null,n,"s (All Lists)"),s.a.createElement(ut.a,null,"Type"),s.a.createElement(ut.a,null,"Items"),s.a.createElement(ut.a,null,"Status"),s.a.createElement(ut.a,null,"Date Created"),s.a.createElement(ut.a,null,"View"),s.a.createElement(ut.a,null,"Delete"))),s.a.createElement(ct.a,null,r))))))}}]),t}(n.Component),yt=Object(b.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},paper:{position:"absolute",width:"100%","max-width":"450px",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,top:"40%",left:0,right:0,margin:"auto"}}})(wt),Nt=a(170),Ct=a.n(Nt),kt=a(171),St=a.n(kt),Ot=a(169),jt=a.n(Ot),Tt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={id:"",list:{},items_complete:0,gotList:!1,listType:a.props.listType?a.props.listType:sessionStorage.listType,progress:"0%",newText:"",showEditor:!1},a.fetchList=function(){fetch("//localhost:5000/list/".concat(a.state.id),{headers:{"x-auth":sessionStorage.token}}).then(function(e){return 200===e.status?e.json():new Error("Could not authenticate user.")}).then(function(e){a.setState({list:e.list[0],gotList:!0},function(){a.countCompleted()})})},a.updateItems=function(e){var t=a.state.list,n=t,s=t.items,r=e.target.id,l=e.target.checked;if(r){var i=s.find(function(e){return e._id===r}),o=i.completed=l;n.items.map(function(e){return e._id===i?e=o:null}),a.setState({list:n,items_complete:0},function(){return a.sendNewList()})}},a.countCompleted=function(){var e=a.state.list.items,t=0;e.map(function(e){return!!e.completed&&t++}),a.setState({items_complete:t},function(){return a.progressPercentage()})},a.progressPercentage=function(){var e=a.state,t=e.items_complete,n=e.list;if(0===n.items.length)return a.setState({progress:"0%"});var s=t/n.items.length*100;return s=Math.round(s),a.setState({progress:"".concat(s,"%")})},a.toggleEditor=function(){return a.setState({showEditor:!a.state.showEditor})},a.removeItem=function(e){var t=a.state.list,n=t.items.filter(function(t){return t._id!==e}),s=t;s.items=n,a.setState({list:s},function(){return a.sendNewList()})},a.handleChange=function(e){if(13===e.which)return a.setNewItem();a.setState(Object(v.a)({},e.target.name,e.target.value))},a.setNewItem=function(){var e=a.state.list,t={text:a.state.newText,completed:!1},n=e;n.items.push(t),a.setState({list:n,newText:""},function(){return a.sendNewList()})},a.sendNewList=function(){var e=a.state.list.items;fetch("//localhost:5000/list/".concat(a.state.id),{method:"PATCH",headers:{"Content-Type":"application/json","x-auth":sessionStorage.token},body:JSON.stringify({items:e})}).then(function(e){return 200===e.status?e.json():new Error("Could not add new list item.")}).then(function(e){a.setState({list:e},function(){return a.countCompleted()})}).catch(function(e){return console.error(e)})},a.prettifyName=function(){var e=a.state.listType.split("_");return e="".concat(e[0]," ").concat(e[1]),"".concat(e,"s")},a.handleListName=function(){var e=a.state,t=e.list,n=e.listType,s=t.listName;if("todo_list"===n)return s;var r=a.prettifyName();return"".concat(s," - ").concat(r)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(window.location.search).get("id");this.setState({id:t},function(){return e.fetchList()})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.list,r=a.gotList,l=r?s.a.createElement("div",{className:"list"},n.completed?s.a.createElement(_e,{variant:"success",className:"success-alert",message:"Completed at: ".concat(new Date(n.completedAt).toLocaleTimeString()," - ").concat(new Date(n.completedAt).getMonth()+1,"/").concat(new Date(n.completedAt).getDate(),"/").concat(new Date(n.completedAt).getFullYear())}):null,s.a.createElement("div",{id:"progress-bar"},s.a.createElement("h1",{className:"single-list-title"},this.handleListName()),s.a.createElement("h3",null,this.state.progress)),s.a.createElement("div",{className:"list-items"},n.items.map(function(t,a){return s.a.createElement(s.a.Fragment,{key:a},s.a.createElement("label",{htmlFor:t._id,className:"label ".concat(t.completed?"cl-selected":"cl-deselected"),onClick:e.updateItems},t.text,s.a.createElement("input",{type:"checkbox",id:t._id,className:"checkbox",defaultChecked:t.completed}),s.a.createElement("span",{className:"checkmark"}),s.a.createElement(Oe.a,{"aria-label":"Delete",className:"delete-item",onClick:function(){return e.removeItem(t._id)}},s.a.createElement(jt.a,null))))})),s.a.createElement(Ct.a,{color:"primary","aria-label":"Add",className:"".concat(t.fab," add-btn"),size:"small",onClick:this.toggleEditor},s.a.createElement(St.a,null))):s.a.createElement("div",{className:"spinner"}),i=r?s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"add-item-title"},"New Task: ",this.state.newText),s.a.createElement("div",{className:"new-item-input-container"},s.a.createElement(ie.a,{id:"new-item-text",label:"New List Item",value:this.state.newText,onChange:this.handleChange,onKeyPress:this.handleChange,className:"".concat(t.textField," input-txt"),margin:"normal",name:"newText",autoComplete:"off"}),s.a.createElement(C.a,{variant:"outlined",color:"primary",className:"".concat(t.button," input-btn"),onClick:this.setNewItem},"Add Item"))):null;return s.a.createElement("article",{className:"single-list-view"},s.a.createElement("section",{className:"section-container wrap"},s.a.createElement(p.a,{to:"/lists/".concat(this.state.listType,"s"),className:"return-btn"},s.a.createElement("i",{className:"fas fa-caret-left"}),"Return to ",this.prettifyName()),l,this.state.showEditor?i:null))}}]),t}(n.Component),xt=Object(b.withStyles)(function(e){return{fab:{margin:e.spacing.unit},button:{margin:e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400}}})(Tt),Lt=a(84),Mt=a.n(Lt),It=a(173),_t=a.n(It),At=a(172),Rt=a.n(At),Dt=a(174),Pt=a.n(Dt),Ut=a(85),Wt=a.n(Ut),Ft=a(87),zt=a.n(Ft),Vt=a(86),qt=a.n(Vt),Bt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={role:"",un:"",email:"",password:"",userImg:"",title_bg:"",warning:!1,warningMsg:"",success:!1,successMsg:"",failure:!1,failureMsg:"",visible:!1},a.fetchUserProfile=function(){fetch("//localhost:5000/users/me",{headers:{"x-auth":sessionStorage.token}}).then(function(e){return 200===e.status?e.json():new Error("Invalid Token")}).then(function(e){a.setState({role:e.user.role,un:e.user.username?e.user.username:"",email:e.user.email,userImg:e.user.profile_img,title_bg:e.user.profile_pg_bg})}).catch(function(e){return console.log(e)})},a.closeModal=function(){return a.setState({warning:!1,success:!1,failure:!1})},a.handleChange=function(e){var t;return a.setState((t={},Object(v.a)(t,e.target.name,e.target.value),Object(v.a)(t,"warning",!1),t))},a.toggleVis=function(){return a.setState({visible:!a.state.visible})},a.submitProfile=function(){var e=a.state,t=e.email,n=e.password,s=e.un,r=e.userImg,l=e.title_bg;return t?Mt.a.isEmail(t)?void fetch("//localhost:5000/users/me",{method:"PATCH",headers:{"Content-Type":"application/json","x-auth":sessionStorage.token},body:JSON.stringify({email:t,username:s,profile_img:r,profile_pg_bg:l,password:n})}).then(function(e){return 200===e.status?e.json():a.setState({failure:!0,warning:!0,failureMsg:"Unable to fulfill request."})}).then(function(e){a.setState({un:e.username?e.username:"",email:e.email,userImg:e.profile_img,title_bg:e.profile_pg_bg,failure:!1,warning:!1,success:!0,password:"",successMsg:"Successfully Updated User Profile!"})}).catch(function(e){return console.error(e)}):a.setState({warning:!0,warningMsg:"Invalid email."}):a.setState({warning:!0,warningMsg:"Email field cannot be blank!"})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.role?this.setState({role:this.props.role}):this.fetchUserProfile()}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.role,n=t.un,r=t.email,l=t.userImg,i=t.title_bg,o=s.a.createElement(Pe.a,{className:e.card},s.a.createElement(We.a,null,s.a.createElement(Je.a,{className:e.media,image:l,title:"User Image"}),s.a.createElement(qe.a,null,s.a.createElement(Z.a,{gutterBottom:!0,variant:"h5",component:"h2",className:"text-center"},n||"Create a username!"),s.a.createElement(z.a,null),s.a.createElement(Z.a,{variant:"h6",component:"h3"},"Role: ",a),s.a.createElement(Z.a,{variant:"h6",component:"h3"},"Email: ",r),s.a.createElement(z.a,null)))),c=s.a.createElement("form",{className:"profile-editor",action:""},s.a.createElement("h2",null,"Update Profile Information"),s.a.createElement(z.a,null),s.a.createElement(Ze.a,{className:"text-fields"},this.state.warning?s.a.createElement(_e,{variant:this.state.failure?"error":"warning",className:e.margin,message:this.state.failure?this.state.failureMsg:this.state.warningMsg,onClick:this.closeModal}):this.state.success?s.a.createElement(_e,{variant:"success",className:e.margin,message:this.state.successMsg,onClick:this.closeModal}):null,s.a.createElement(ie.a,{label:"Profile Picture",name:"userImg",className:e.textField,value:this.state.userImg,onChange:this.handleChange,margin:"normal",autoComplete:"off",variant:"outlined",helperText:"This only accepts urls to images",InputProps:{startAdornment:s.a.createElement(ce.a,{position:"start"},s.a.createElement(Rt.a,null))}}),s.a.createElement(ie.a,{label:"Username",name:"un",className:e.textField,value:this.state.un,onChange:this.handleChange,margin:"normal",autoComplete:"off",variant:"outlined",InputProps:{startAdornment:s.a.createElement(ce.a,{position:"start"},s.a.createElement(_t.a,null))}}),s.a.createElement(ie.a,{label:"Email",name:"email",className:e.textField,value:this.state.email,onChange:this.handleChange,margin:"normal",autoComplete:"off",variant:"outlined",InputProps:{startAdornment:s.a.createElement(ce.a,{position:"start"},s.a.createElement(Wt.a,null))}}),s.a.createElement(ie.a,{label:"New Password",name:"password",type:this.state.visible?"text":"password",className:e.textField,value:this.state.password,onChange:this.handleChange,margin:"normal",autoComplete:"off",variant:"outlined",InputProps:{startAdornment:s.a.createElement(ce.a,{position:"start"},this.state.visible?s.a.createElement(qt.a,{className:"vis-icon",onClick:this.toggleVis}):s.a.createElement(zt.a,{className:"vis-icon",onClick:this.toggleVis}))}}),s.a.createElement(ie.a,{label:"Page Title Background",name:"title_bg",className:e.textField,value:this.state.title_bg,onChange:this.handleChange,margin:"normal",autoComplete:"off",variant:"outlined",helperText:"This only accepts urls to images",InputProps:{startAdornment:s.a.createElement(ce.a,{position:"start"},s.a.createElement(Pt.a,null))}})),s.a.createElement(C.a,{variant:"outlined",color:"primary",className:e.button,onClick:this.submitProfile},"Save Changes"));return s.a.createElement("article",{className:"profile-article"},s.a.createElement("h1",{className:"article-title",style:i?{backgroundImage:"url(".concat(i,")")}:null},"Profile"),s.a.createElement("section",{className:"".concat(e.root," section-container profile-section large-wrapper")},a?s.a.createElement(ne.a,{container:!0,spacing:24,className:"grid-container"},s.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4,className:"grid-item"},o),s.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:8,className:"grid-item"},c)):s.a.createElement("div",{className:"spinner"})))}}]),t}(n.Component),Jt=Object(b.withStyles)(function(e){return{root:{flexGrow:1},paper:{padding:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},card:{maxWidth:"100%"},media:{height:140,backgroundSize:"contain"},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200},button:{margin:e.spacing.unit,fontWeight:"bold"},margin:{margin:"auto",marginTop:"1rem"}}})(Bt),Gt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={users:[],receivedUsers:!1,searchResults:[],defaultLists:[],userToRemove:null,open:!1,failure:!1,msg:""},a.fetchUsers=function(){fetch("//localhost:5000/users",{headers:{"x-auth":sessionStorage.token}}).then(function(e){if(200===e.status)return e.json();throw new Error("Could not retrive users")}).then(function(e){a.setState({users:e,receivedUsers:!0,searchResults:e,defaultLists:e})}).catch(function(e){return console.error(e)})},a.handleClose=function(){return a.setState({open:!1})},a.closeModal=function(){return a.setState({failure:!1})},a.prettifyName=function(){var e=a.state.listType,t=e.split("_");return"ecom_live_list"===e?(t="".concat(t[0]," ").concat(t[1]," ").concat(t[2]),"".concat(t,"s")):(t="".concat(t[0]," ").concat(t[1]),"".concat(t,"s"))},a.handleSearch=function(e){var t=e.target.value,n=a.state.users,s=new RegExp(t,"i"),r=[];n.map(function(e){return e.email.match(s)&&t?(r.push(e),a.setState({searchResults:r,noMatch:!1})):0===r.length&&t?a.setState({searchResults:a.state.defaultLists,noMatch:!0,msg:"No results for ".concat(t)}):!t&&a.setState({noMatch:!1,searchResults:a.state.defaultLists})})},a.askToDelete=function(e){return a.setState({userToRemove:e,open:!0})},a.deleteUser=function(){var e=a.state.userToRemove;fetch("//localhost:5000/users/remove/".concat(e),{method:"delete",headers:{"x-auth":sessionStorage.token}}).then(function(e){return 200===e.status?e.json():409===e.status?e.json().then(function(e){return a.setState({failure:!0,msg:e.err})}):void 0}).then(function(e){a.setState({open:!1}),a.fetchUsers()})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.checkAuth().then(function(t){return"admin"===t?e.fetchUsers():s.a.createElement(d.a,{to:"/"})})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.searchResults,r=a.receivedUsers?n.map(function(t){return s.a.createElement(pt.a,{key:t._id},s.a.createElement(ut.a,{component:"th",scope:"row"},t.listName),s.a.createElement(ut.a,null,t._id),s.a.createElement(ut.a,null,t.email),s.a.createElement(ut.a,null,t.role),s.a.createElement(ut.a,null,t.username?t.username:"No username created."),s.a.createElement(ut.a,null,s.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:function(){return e.askToDelete(t.email)}},"Delete")))}):null,l=s.a.createElement("div",{className:"search-bar-container"},s.a.createElement("input",{id:"search",placeholder:"Search by email...",type:"search",onChange:this.handleSearch,autoComplete:"off"}),s.a.createElement(p.a,{to:"/",className:"return-btn"},s.a.createElement("i",{className:"fas fa-caret-left"}),"Return to home"),this.state.noMatch?s.a.createElement("div",{className:"warning"},s.a.createElement(_e,{variant:"warning",className:t.margin,message:this.state.msg})):null),i=s.a.createElement(bt.a,{"aria-labelledby":"delete-modal-title","aria-describedby":"delete-modal-description",open:this.state.open,onClose:this.handleClose},s.a.createElement("div",{className:t.paper},s.a.createElement(Z.a,{variant:"h6",id:"modal-title"},"Are you sure you want to remove this user?"),s.a.createElement(Z.a,{variant:"subtitle1",id:"simple-modal-description"},"This action"," ",s.a.createElement("strong",null,s.a.createElement("em",null,"cannot"))," ","be undone, you must be absolutely positive you want to remove this user."),s.a.createElement("div",{className:"btn-container"},s.a.createElement(C.a,{color:"secondary",variant:"contained",onClick:this.deleteUser},"Remove The User"),s.a.createElement(C.a,{color:"primary",variant:"contained",onClick:this.handleClose},"Keep The User"))));return s.a.createElement("div",{className:"all-users-type"},s.a.createElement("h1",{className:"article-title"},"All Users - Admin Overview"),l,s.a.createElement("article",{className:"users-table"},s.a.createElement("section",{className:"section-container"},i,this.state.failure?s.a.createElement(_e,{variant:"error",className:t.margin,message:this.state.msg,onClick:this.closeModal}):null,s.a.createElement(Et.a,{className:t.root},s.a.createElement(it.a,{className:t.table},s.a.createElement(dt.a,null,s.a.createElement(pt.a,null,s.a.createElement(ut.a,null,"All Users"),s.a.createElement(ut.a,null,"ID"),s.a.createElement(ut.a,null,"Email"),s.a.createElement(ut.a,null,"Role"),s.a.createElement(ut.a,null,"Username"),s.a.createElement(ut.a,null,"Delete"))),s.a.createElement(ct.a,null,r))))))}}]),t}(n.Component),Ht=Object(b.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},paper:{position:"absolute",width:"100%","max-width":"450px",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,top:"40%",left:0,right:0,margin:"auto"},margin:{margin:"auto"}}})(Gt),Kt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={labelWidth:0,email:"",password:"",role:"",userImg:"https://s3.amazonaws.com/minervalists/default_user_icon.png",warning:!1,warningMsg:"",success:!1,successMsg:"",failure:!1,failureMsg:"",visible:!1,loading:!1},a.closeModal=function(){return a.setState({warning:!1,success:!1,failure:!1})},a.handleChange=function(e){var t;return a.setState((t={},Object(v.a)(t,e.target.name,e.target.value),Object(v.a)(t,"warning",!1),t))},a.toggleVis=function(){return a.setState({visible:!a.state.visible})},a.addUser=function(){var e=a.state,t=e.email,n=e.password,s=e.role;return a.setState({loading:!0}),s?Mt.a.isEmail(t)?void fetch("//localhost:5000/users/add",{method:"POST",headers:{"x-auth":sessionStorage.token,"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,role:s})}).then(function(e){return 200===e.status?a.setState({loading:!1,success:!0,successMsg:"Successfully generated user!"}):a.setState({failure:!0,failureMsg:"Unable to create new user"})}).catch(function(e){return console.error(e)}):a.setState({warning:!0,warningMsg:"Invalid email!",loading:!1}):a.setState({warning:!0,warningMsg:"All of the fields must be filled out.",loading:!1})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.checkAuth().then(function(e){return"admin"===e?"":s.a.createElement(d.a,{to:"/"})}),this.setState({labelWidth:i.a.findDOMNode(this.InputLabelRef).offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.email,r=a.password,l=a.role,i=a.userImg,o=s.a.createElement(Pe.a,{className:t.card},s.a.createElement(We.a,null,s.a.createElement(Je.a,{className:t.media,image:i,title:"User Image"}),s.a.createElement(qe.a,null,s.a.createElement(z.a,null),s.a.createElement(Z.a,{variant:"h6",component:"h3"},"Role: ",l),s.a.createElement(Z.a,{variant:"h6",component:"h3"},"Email: ",n),s.a.createElement(z.a,null)))),c=s.a.createElement("form",{className:"profile-editor",action:""},s.a.createElement("h2",null,"New User's Information"),s.a.createElement(z.a,null),s.a.createElement(Ze.a,{className:"text-fields"},this.state.warning?s.a.createElement(_e,{variant:this.state.failure?"error":"warning",className:t.margin,message:this.state.failure?this.state.failureMsg:this.state.warningMsg,onClick:this.closeModal}):this.state.success?s.a.createElement(_e,{variant:"success",className:t.margin,message:this.state.successMsg,onClick:this.closeModal}):null,s.a.createElement(ie.a,{label:"Email",name:"email",className:t.textField,value:n,onChange:this.handleChange,margin:"normal",autoComplete:"off",variant:"outlined",InputProps:{startAdornment:s.a.createElement(ce.a,{position:"start"},s.a.createElement(Wt.a,null))}}),s.a.createElement(ie.a,{label:"New Password",name:"password",type:this.state.visible?"text":"password",className:t.textField,value:r,onChange:this.handleChange,margin:"normal",autoComplete:"off",variant:"outlined",InputProps:{startAdornment:s.a.createElement(ce.a,{position:"start"},this.state.visible?s.a.createElement(qt.a,{className:"vis-icon",onClick:this.toggleVis}):s.a.createElement(zt.a,{className:"vis-icon",onClick:this.toggleVis}))}}),s.a.createElement(Ze.a,{variant:"outlined",className:t.formControl},s.a.createElement($e.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"outlined-label"},"Role"),s.a.createElement(tt.a,{value:this.state.role,onChange:this.handleChange,input:s.a.createElement(Ye.a,{labelWidth:this.state.labelWidth,name:"role",id:"outlined-label"})},s.a.createElement(nt.a,{value:""},s.a.createElement("em",null,"None")),s.a.createElement(nt.a,{value:"user"},"User"),s.a.createElement(nt.a,{value:"admin"},"Admin")))),this.state.loading?s.a.createElement("div",{className:"spinner"}):s.a.createElement(C.a,{variant:"outlined",color:"primary",className:t.button,onClick:this.addUser},"Create User"));return s.a.createElement("article",{className:"add-user-article"},s.a.createElement("h1",{className:"article-title"},"Create New User"),s.a.createElement("section",{className:"section-container add-user-section large-wrapper"},s.a.createElement(ne.a,{container:!0,spacing:24,className:"grid-container"},s.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:4,className:"grid-item"},o),s.a.createElement(ne.a,{item:!0,xs:12,sm:6,md:8,className:"grid-item"},c))))}}]),t}(n.Component),Yt=Object(b.withStyles)(function(e){return{root:{flexGrow:1,display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit},card:{maxWidth:"100%"},media:{height:140,backgroundSize:"contain"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200},button:{margin:e.spacing.unit,fontWeight:"bold"},margin:{margin:"auto",marginTop:"1rem"}}})(Kt),Xt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={loggedIn:!0,role:sessionStorage.role?sessionStorage.role:"",authToken:"",resMsg:"",listType:""},a.checkForToken=function(){return sessionStorage.token?(a.setState({loggedIn:!0,authToken:sessionStorage.token}),sessionStorage.token):(a.setState({loggedIn:!1}),!1)},a.checkAuth=function(){return new Promise(function(e,t){fetch("//localhost:5000/users/me",{headers:{"x-auth":sessionStorage.token}}).then(function(e){return 200===e.status?e.json():new Error("Could not validate token")}).then(function(t){a.setState({role:t.user.role}),sessionStorage.role=t.user.role,e(t.user.role)}).catch(function(e){return console.log(e)})})},a.signIn=function(e,t){fetch("//localhost:5000/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(function(e){if(200===e.status)return e.json();throw Error("Authenticated failed.")}).then(function(e){a.setState({loggedIn:!0,authToken:e.code,role:e.role},function(){sessionStorage.token=e.code,sessionStorage.role=e.role,window.location.href="/"})}).catch(function(e){return a.setState({resMsg:"Authentication failed!"})})},a.signOut=function(e){e.preventDefault(),fetch("//localhost:5000/users/signout",{method:"DELETE",headers:{"x-auth":sessionStorage.token}}).then(function(e){return e.json()}).then(function(e){a.setState({loggedIn:!1,resMsg:e.success},function(){return sessionStorage.removeItem("token")})}).catch(function(e){a.setState({loggedIn:!1,resMsg:"Signed out successfully"},function(){return sessionStorage.removeItem("token")})})},a.updateListType=function(e){a.setState({listType:e}),sessionStorage.listType=e},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.checkForToken(),this.checkAuth()}},{key:"render",value:function(){var e=this;return s.a.createElement("main",{className:"App main"},this.state.loggedIn?null:s.a.createElement(d.a,{to:"/login"}),this.state.loggedIn?s.a.createElement(te,{loggedIn:this.state.loggedIn,signOut:this.signOut}):null,s.a.createElement(g.a,{path:"/",exact:!0,render:function(){return s.a.createElement(He,{loggedIn:e.state.loggedIn,signOut:e.signOut,updateListType:e.updateListType})}}),s.a.createElement(g.a,{path:"/login",exact:!0,render:function(){return s.a.createElement(Re,{signIn:e.signIn,resMsg:e.state.resMsg})}}),s.a.createElement(g.a,{path:"/add-list",render:function(){return s.a.createElement(rt,{updateListType:e.updateListType})}}),s.a.createElement(g.a,{path:"/lists/:listType",render:function(){return s.a.createElement(yt,{listType:e.state.listType})}}),s.a.createElement(g.a,{path:"/list",render:function(){return s.a.createElement(xt,{listType:e.state.listType})}}),s.a.createElement(g.a,{path:"/profile",render:function(){return s.a.createElement(Jt,{role:e.state.role})}}),s.a.createElement(g.a,{exact:!0,path:"/users",render:function(){return"admin"===e.state.role?s.a.createElement(Ht,{checkAuth:e.checkAuth}):s.a.createElement(d.a,{to:"/"})}}),s.a.createElement(g.a,{path:"/users/add",render:function(){return"admin"===e.state.role?s.a.createElement(Yt,{checkAuth:e.checkAuth}):s.a.createElement(d.a,{to:"/"})}}),this.state.loggedIn?s.a.createElement(re,null):null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(r.a,null,s.a.createElement(Xt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},52:function(e,t,a){e.exports=a.p+"static/media/logo.ec3271b8.png"}},[[176,2,1]]]);
//# sourceMappingURL=main.0e14be08.chunk.js.map